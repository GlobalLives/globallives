var tribe_auto_sysinfo=tribe_auto_sysinfo||{};tribe_auto_sysinfo.ajax={event:{}},function(t,n){"use strict";n.init=function(){this.init_ajax(),this.init_copy(),n.navigate_to_id()},n.init_copy=function(){var n=new Clipboard(".system-info-copy-btn"),i='<span class="dashicons dashicons-clipboard license-btn"></span>',e=tribe_system_info.clipboard_btn_text;t(".system-info-copy-btn").click(function(t){t.preventDefault()}),n.on("success",function(t){t.clearSelection(),t.trigger.innerHTML=i+'<span class="optin-success">'+tribe_system_info.clipboard_copied_text+"<span>",window.setTimeout(function(){t.trigger.innerHTML=i+e},5e3)}),n.on("error",function(t){t.trigger.innerHTML=i+'<span class="optin-fail">'+tribe_system_info.clipboard_fail_text+"<span>",window.setTimeout(function(){t.trigger.innerHTML=i+e},5e3)})},n.init_ajax=function(){this.$system_info_opt_in=t("#tribe_auto_sysinfo_opt_in"),this.$system_info_opt_in_msg=t(".tribe-sysinfo-optin-msg"),this.$system_info_opt_in.change(function(){this.checked?n.event.ajax("generate"):n.event.ajax("remove")})},n.event.ajax=function(i){var e={action:"tribe_toggle_sysinfo_optin",confirm:tribe_system_info.sysinfo_optin_nonce,generate_key:i};t.post(ajaxurl,e,function(i){i.success?n.$system_info_opt_in_msg.html("<p class='optin-success'>"+i.data+"</p>"):(n.$system_info_opt_in_msg.html("<p class='optin-fail'>"+i.data.message+" Code:"+i.data.code+" Status:"+i.data.data.status+"</p>"),t("#tribe_auto_sysinfo_opt_in").prop("checked",!1))})},n.navigate_to_id=function(){t(document).ready(n.maybe_navigate_to_id_on_doc_ready),t(document).on("click",".tribe_events_page_tribe-common",n.maybe_navigate_to_id_after_click)},n.maybe_navigate_to_id_on_doc_ready=function(){var t=n.get_url_fragment(window.location.href);t.length&&n.adjust_scroll_position(t)},n.maybe_navigate_to_id_after_click=function(i){var e=t(i.target).attr("href");if("undefined"!=typeof e){var o=n.get_url_fragment(e);o&&n.adjust_scroll_position(o)}},n.adjust_scroll_position=function(n){if(t("#wpadminbar").length){var i=t("#"+n).position();i&&setTimeout(function(){window.scroll(window.scrollX,i.top)})}},n.get_url_fragment=function(t){var n=t.match(/#([a-z0-9_-]+)$/i);return null===n?"":n[1]},t(function(){n.init()})}(jQuery,tribe_auto_sysinfo.ajax);