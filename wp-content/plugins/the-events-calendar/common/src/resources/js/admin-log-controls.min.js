var tribe_logger_admin=tribe_logger_admin||{},tribe_logger_data=tribe_logger_data||{};!function(e,t){function n(){u||(c(),d(),r())}function r(){var t={action:"tribe_logging_controls",check:tribe_logger_data.check,"log-level":e("#log-level").find(":selected").attr("name"),"log-engine":e("#log-engine").find(":selected").attr("name")};v&&(t["log-view"]=_),e.ajax(ajaxurl,{method:"POST",success:a,error:l,dataType:"json",data:t})}function a(t){g(),e.isArray(t.data.entries)&&(j.html(o(t.data.entries)),i())}function o(e){var t="<table>";for(var n in e){t+="<tr>";for(var r in e[n])t+="<td>"+e[n][r]+"</td>";t+="</tr>"}return t+"</table>"}function i(){var t=w.attr("href"),n=encodeURI(f()),r=t.match(/&log=([a-z0-9\-]+)/i);t=e.isArray(r)&&2===r.length?t.replace(r[0],"&log="+n):t.indexOf("?")?t+"&log="+n:t+"?log="+n,w.attr("href",t)}function l(){g()}function d(){u=!0,m.prop("disabled",!0),p.removeClass("hidden")}function g(){u=!1,m.prop("disabled",!1),p.addClass("hidden")}function c(){var e=f(),t=s();e!==_||t!==b?(v=!0,_=e,b=t):v=!1}function f(){return e("#log-selector").find(":selected").attr("name")}function s(){return e("#log-engine").find(":selected").attr("name")}var u=!1,_="",b="",v=!1,h=e("#tribe-log-controls"),m=h.find("select"),p=h.find(".working"),j=e("#tribe-log-viewer"),w=e("a.download_log");_=f(),b=s(),i(),m.change(n)}(jQuery,tribe_logger_admin);