jQuery(document).ready(function(a){function k(a){"US"==a||"United States"==a?(s.show(),m.hide()):(""!=a?m.show():m.hide(),s.hide())}var e=a(".tribe-field-dropdown_select2 select"),D=a("#view-calendar-link-div").html(),f=a('select[name="tribeEventsTemplate"]'),b=a("#tribe-event-datepickers");a(".chosen, .tribe-field-dropdown_chosen select").chosen();a(".select2").select2({width:"250px"});e.select2({width:"250px"});a(D).insertAfter(".edit-php.post-type-tribe_events #wpbody-content .wrap h2:eq(0) a");
f.length&&""===f.val()&&(e=f.find("option:selected").text(),f.prev(".select2-container").children().children("span").text(e));a(".hide-if-js").hide();if("undefined"!==typeof TEC){f=0;b.length&&(f=b.data("startofweek"));var E=a('[name="recurrence[type]"]'),t=a("#EventEndDate"),b={dateFormat:"yy-mm-dd",showAnim:"fadeIn",changeMonth:!0,changeYear:!0,numberOfMonths:3,firstDay:f,showButtonPanel:!0,beforeShow:function(a,b){b.input.data("prevDate",b.input.datepicker("getDate"))},onSelect:function(c){var b=
"EventStartDate"==this.id?"minDate":"maxDate",d=a(this).data("datepicker");c=a.datepicker.parseDate(d.settings.dateFormat||a.datepicker._defaults.dateFormat,c,d.settings);if("EventStartDate"===this.id&&"None"!==E.val()){var e=a("#EventStartDate").data("prevDate"),d=t.datepicker("getDate"),e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),d=Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()),d=Math.floor((d-e)/864E5);c=new Date(c.setDate(c.getDate()+d));t.datepicker("option",b,c).datepicker("setDate",
c)}else F.not(this).not("#recurrence_end").datepicker("option",b,c)}};a.extend(b,TEC);var F=a("#EventStartDate, #EventEndDate, .tribe-datepicker").datepicker(b),u=a("#allDayCheckbox"),v=a(".timeofdayoptions"),w=a("#EventTimeFormatDiv"),b=a("select[name='EventStartMonth'], select[name='EventEndMonth']"),x=a("select[name='EventStartMonth']"),y=a('select[name="EventEndMonth"]'),g,z=function(){!0===u.prop("checked")?(v.hide(),w.hide()):(v.show(),w.show())};u.click(function(){z()});z();var A=[29,31,28,
31,30,31,30,31,31,30,31,30,31],G=[a("#28StartDays"),a("#29StartDays"),a("#30StartDays"),a("#31StartDays")],H=[a("#28EndDays"),a("#29EndDays"),a("#30EndDays"),a("#31EndDays")];b.change(function(){var c=a(this),b=c.attr("name"),b="EventStartMonth"==b?"Start":"End",c=c.attr("value");"0"==c.charAt(0)&&(c=c.replace("0",""));var d=a("select[name='Event"+b+"Year']").attr("value")%4;2==c&&0==d&&(c=0);d=a("select[name='Event"+b+"Day']");a(".event"+b+"DateField").remove();"Start"==b?(g=G[A[c]-28],g.val(d.val()),
x.after(g)):(g=H[A[c]-28],g.val(d.val()),y.after(g))});b.change();a("select[name='EventStartYear']").change(function(){x.change()});a("select[name='EventEndYear']").change(function(){y.change()});a("form[name='post']").submit(function(){!0===a("#isEventNo").attr("checked")||a("#isEventNo").attr("checked");return!0});var n=a(".venue"),b=a("#saved_venue");0<b.length&&"0"!=b.val()&&(n.hide(),a('[name="venue[Venue]"]').val(""));b.change(function(){"0"==a(this).val()?(n.fadeIn(),a("#EventCountry").val(0).trigger("liszt:updated"),
a("#StateProvinceSelect").val(0).trigger("liszt:updated"),k("")):n.fadeOut()});var l=a(".organizer"),b=a("#saved_organizer");0<b.length&&"0"!=b.val()&&(l.hide(),a("input",l).val(""));b.change(function(){"0"==a(this).val()?l.fadeIn():l.fadeOut()})}var s=a("#StateProvinceSelect_chzn"),m=a("#StateProvinceText");k(a("#EventCountry > option:selected").val());var b=a('[name="hideSubsequentRecurrencesDefault"]'),p=a('[name="userToggleSubsequentRecurrences"]');if(b.length&&p.length){var q=a("#tribe-field-userToggleSubsequentRecurrences");
b.is(":checked")&&(p.prop("checked",!1),q.hide());b.on("click",function(){a(this).is(":checked")?(p.prop("checked",!1),q.hide()):q.show()})}var r=a('[name="recurrence[end]"]'),b=a('[name="is_recurring"]');a("#EventCountry").change(function(){var c=a(this).find("option:selected").val();k(c)});"true"==b.val()&&(b=function(){a("#recurrence-changed-row").show()},a(".recurrence-row input, .custom-recurrence-row input,.recurrence-row select, .custom-recurrence-row select").change(b),r.bind("recurrenceEndChanged",
b));r.datepicker("option","onSelect",function(){r.removeClass("placeholder");a(this).trigger("recurrenceEndChanged")});a("#EventInfo input, #EventInfo select").change(function(){a(".rec-error").hide()});a('.wp-admin.events-cal #post #publishing-action input[type="submit"]').click(function(){a(this).data("clicked",!0)});a('[name="recurrence[type]"]').change(function(){var c=a(this).find("option:selected").val();a(".custom-recurrence-row").hide();"Custom"==c?(a("#recurrence-end").show(),a("#custom-recurrence-frequency").show(),
a('[name="recurrence[custom-type]"]').change()):("None"==c?a("#recurrence-end").hide():a("#recurrence-end").show(),a("#custom-recurrence-frequency").hide())});a('[name="recurrence[end-type]"]').change(function(){var c=a(this).find("option:selected").val();"On"==c?(a("#rec-count").hide(),a("#recurrence_end").show()):"Never"==c?a("#rec-count, #recurrence_end").hide():(a("#recurrence_end").hide(),a("#rec-count").show())});a('[name="recurrence[custom-type]"]').change(function(){a(".custom-recurrence-row").hide();
var c=a(this).find("option:selected"),b=c.data("tablerow");a(b).show();a("#recurrence-interval-type").text(c.data("plural"));a('[name="recurrence[custom-type-text]"]').val(c.data("plural"))});a("#recurrence_end_count").change(function(){a('[name="recurrence[type]"]').change()});a('[name="recurrence[type]"]').change(function(){var c=a(this).find("option:selected"),b=a("#recurrence_end_count").val();a("#occurence-count-text").text(1==b?c.data("single"):c.data("plural"));a('[name="recurrence[occurrence-count-text]"]').val(a("#occurence-count-text").text())});
a('[name="recurrence[custom-month-number]"]').change(function(){var c=a(this).find("option:selected"),b=a('[name="recurrence[custom-month-day]"]');isNaN(c.val())?b.show():b.hide()});a("#icon-edit").hasClass("icon32-posts-tribe_venue")&&a("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu").removeClass("wp-not-current-submenu").find("li:contains('Venues')").addClass("current");a("#icon-edit").hasClass("icon32-posts-tribe_organizer")&&
a("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu").removeClass("wp-not-current-submenu").find("li:contains('Organizers')").addClass("current");b=a("#tribe-field-tribeEnableViews");if(b.length){var h=a('.tribe-field-dropdown_select2 select[name="viewOption"]'),I=b.find("input:checkbox"),B=a("#tribe-field-tribeEnableViews .tribe-field-wrap p.description"),C={},J=function(){h.find("option").remove();I.each(function(){var b=a(this);
b.is(":checked")&&(b=b.val(),h.append('<option value="'+b+'">'+C[b]+"</option>"))});h.find("option").first().attr("selected","selected");h.select2("destroy").select2({width:"250px"})};(function(){h.find("option").each(function(){var b=a(this);C[b.attr("value")]=b.text()})})();b.on("change","input:checkbox",function(){var b=a(this);1>a('[name="tribeEnableViews[]"]:checked').length?(b.attr("checked",!0),B.css("color","red")):B.removeAttr("style");J()})}});
jQuery(document).ajaxSuccess(function(a,k,e){"undefined"!==typeof e&&("undefined"!==typeof e.data&&-1!=e.data.search("action=save-widget"))&&jQuery("#widgets-right .chosen").chosen()});
