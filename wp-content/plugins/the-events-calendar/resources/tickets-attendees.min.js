jQuery(document).ready(function(a){function f(){a("#email_errors").removeClass("ui-state-error").addClass("ui-state-highlight").text(Attendees.sending);var b=a("#email_to_address").val(),c=a("#email_to_user").val(),e=!1;-1<c&&(e=c);if(c=""!==a.trim(b))c=RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(b);
c&&(e=b);e||a("#email_errors").removeClass("ui-state-highlight").addClass("ui-state-error").text(Attendees.required);return e}AttendeesPointer&&(options=a.extend(AttendeesPointer.options,{close:function(){a.post(ajaxurl,{pointer:AttendeesPointer.pointer_id,action:"dismiss-wp-pointer"})}}),a(AttendeesPointer.target).pointer(options).pointer("open"));a("input.print").on("click",function(a){window.print()});a("#attendees_email_wrapper").dialog({autoOpen:!1,dialogClass:"attendees_email_dialog",height:"auto",
width:400,modal:!0,buttons:{Send:function(){var b=a(".attendees_email_dialog #email_errors"),c=a(".attendees_email_dialog #email_response"),e=a(".attendees_email_dialog #email_send, .attendees_email_dialog .ui-dialog-buttonpane");b.show();var d=f();!1!==d&&(c.show(),e.hide(),d={action:"tribe-ticket-email-attendee-list",email:d,nonce:Attendees.nonce,event_id:a("#event_id").val()},a.post(ajaxurl,d,function(d){d.success?(b.removeClass("ui-state-error").removeClass("ui-state-highlight").text(""),d=a("#email_to_user"),
d.prop("disabled",!1),d.val(""),a("#email_to_address").val(""),a("#attendees_email_wrapper").dialog("close"),c.hide(),e.show(),b.hide()):(tribe_status_bg=c.css("background"),b.removeClass("ui-state-highlight").addClass("ui-state-error").text(d.message),a(".ui-dialog-buttonpane").show(),a(".ui-button-text-only:first").hide(),a("#email_response").css("background","none"))}))},Close:function(){a(this).dialog("close");a(".ui-button-text-only:first").show();a(".attendees_email_dialog #email_response").hide();
a(".attendees_email_dialog #email_send, .attendees_email_dialog .ui-dialog-buttonpane").show();a(".attendees_email_dialog #email_errors").removeClass("ui-state-error").removeClass("ui-state-highlight").text("").hide()}}});a("input.email").click(function(){var b=a("#email_to_user");b.prop("disabled",!1);b.val("");a("#email_to_address").val("");a("#email_response").removeClass("ui-state-error").removeClass("ui-state-highlight").text("");a(".ui-button-text-only:first").show();a(".attendees_email_dialog #email_response").hide();
a(".attendees_email_dialog #email_send, .attendees_email_dialog .ui-dialog-buttonpane").show();a("#attendees_email_wrapper").dialog("open")});a("#email_to_address").on("keyup paste",function(){var b=jQuery(this).val().trim(),c=a("#email_to_user");""===b?c.prop("disabled",!1):(c.val(""),c.prop("disabled","disabled"))});a("#filter_attendee").on("keyup paste",function(){var b=jQuery(this).val().toLowerCase();a("#the-list").find("tr").each(function(c,e){var d=a(e),f=d.children("td.order_id").children("a").text(),
g=d.children("td.attendee_id").text(),h=d.children("td.security").text();0===g.indexOf(b)||0===f.indexOf(b)||0===h.indexOf(b)?d.show():d.hide()})});a(".tickets_checkin").click(function(b){var c=jQuery(this),e={action:"tribe-ticket-checkin-"+c.attr("data-provider"),provider:c.attr("data-provider"),order_ID:c.attr("data-attendee-id"),nonce:Attendees.checkin_nonce};a.post(ajaxurl,e,function(b){b.success&&(c.parent("td").parent("tr").addClass("tickets_checked"),a("#total_checkedin").text(parseInt(a("#total_checkedin").text())+
1))},"json");b.preventDefault()});a(".tickets_uncheckin").click(function(b){var c=jQuery(this),e={action:"tribe-ticket-uncheckin-"+c.attr("data-provider"),provider:c.attr("data-provider"),order_ID:c.attr("data-attendee-id"),nonce:Attendees.uncheckin_nonce};a.post(ajaxurl,e,function(b){b.success&&(c.parent("span").parent("td").parent("tr").removeClass("tickets_checked"),a("#total_checkedin").text(parseInt(a("#total_checkedin").text())-1))},"json");b.preventDefault()})});
